<div class="modal fade price-16" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="price-title">CATALOG A5, Bìa cứng</h5>
                <span class="material-symbols-outlined close">
                        close
                    </span>
            </div>
            <div class="modal-body">
                <div class="d-flex paper line">
                    <div class="line-item">
                        <label for="dl">Số lượng</label>
                        <input id="quantity" pattern="[0-9]*" type="number"/>
                    </div>
                    <div class="line-item">
                        <label for="sl_giay_bia_1">SL Giấy bìa*</label>
                        <input id="sl_giay_bia_1" type="number" value="150"/>
                    </div>

                    <div class="line-item">
                        <label for="sl_giay_bia">SL Giấy bìa</label>
                        <input id="sl_giay_bia" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="length">Dài bìa</label>
                        <input id="length" pattern="[0-9]*" type="number" value="0.39"/>
                    </div>

                    <div class="line-item">
                        <label for="width">Rộng bìa</label>
                        <input id="width" pattern="[0-9]*" type="number" value="0.27"/>
                    </div>
                </div>
                <div class="d-flex zn line">
                    <div class="line-item">
                        <label for="tt_giay_bia_1">T Giấy bìa*</label>
                        <input id="tt_giay_bia_1" pattern="[0-9]*" type="number" value="150"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_giay_bia_2">T Giấy bìa**</label>
                        <input id="tt_giay_bia_2" pattern="[0-9]*" type="number" value="23"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_giay_bia">T Giấy bìa</label>
                        <input id="tt_giay_bia" disabled/>
                    </div>
                </div>
                <div class="d-flex zn line">
                    <div class="line-item">
                        <label for="zn-price">In, Kẽm bìa</label>
                        <input id="zn-price" pattern="[0-9]*" type="number"/>
                    </div>
                    <div class="line-item">
                        <label for="zn-quantity">SL Kẽm</label>
                        <input id="zn-quantity" pattern="[0-9]*" type="number"/>
                    </div>
                    <div class="line-item">
                        <label for="zn_total_1">Tiền kẽm</label>
                        <input id="zn_total_1" disabled/>
                    </div>
                </div>
                <div class="d-flex laminate line">
                    <div class="line-item">
                        <label for="print_quantity">Lượt in</label>
                        <input id="print_quantity" type="number" pattern="[0-9]*"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_print_1">TT Lượt in*</label>
                        <input id="tt_print_1" pattern="[0-9]*" type="number" value="200"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_print">TT Lượt in</label>
                        <input id="tt_print" disabled/>
                    </div>
                </div>
                <div class="d-flex other line">
                    <div class="line-item">
                        <label for="tt_can_bia_1">TT Cán bìa*</label>
                        <input id="tt_can_bia_1" type="number" value="43"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_can_bia_2">TT Cán bìa**</label>
                        <input id="tt_can_bia_2" type="number" value="65"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_can_bia_3">TT Cán bìa**</label>
                        <input id="tt_can_bia_3" type="number" value="0.24"/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="tt_can_bia">TT Cán bìa</label>
                        <input id="tt_can_bia" disabled/>
                    </div>
                    <div class="line-item">
                        <label for="bia_total">Tổng tiền bìa</label>
                        <input id="bia_total" disabled/>
                    </div>
                </div>
                <div class="d-flex other line">
                    <div class="line-item">
                        <label for="page_quantity">Số trang</label>
                        <input id="page_quantity" type="number" pattern="[0-9]*"/>
                    </div>
                    <div class="line-item">
                        <label for="tay_quantity_1">SL Tay*</label>
                        <input id="tay_quantity_1" type="number" value="16"/>
                    </div>
                    <div class="line-item">
                        <label for="tay_quantity">SL Tay</label>
                        <input id="tay_quantity" disabled/>
                    </div>
                </div>
                <div class="d-flex other line">
                    <div class="line-item">
                        <label for="r_bh_1">SL Giấy R BH*</label>
                        <input id="r_bh_1" type="number" pattern="[0-9]*" value="150"/>
                    </div>
                    <div class="line-item">
                        <label for="r_bh">SL Giấy R BH</label>
                        <input id="r_bh" disabled/>
                    </div>
                    <div class="line-item">
                        <label for="r_quantity">SL Giấy R</label>
                        <input id="r_quantity" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="length_r">Dài R</label>
                        <input id="length_r" pattern="[0-9]*" type="number" value="0.62"/>
                    </div>

                    <div class="line-item">
                        <label for="width_r">Rộng R</label>
                        <input id="width_r" pattern="[0-9]*" type="number" value="0.43"/>
                    </div>
                </div>
                <div class="d-flex other line">
                    <div class="line-item">
                        <label for="r_paper_1">Tiền Giấy R*</label>
                        <input id="r_paper_1" type="number" pattern="[0-9]*" value="150"/>
                    </div>
                    <div class="line-item">
                        <label for="r_paper_2">Tiền Giấy R**</label>
                        <input id="r_paper_2" type="number" value="23"/>
                    </div>
                    <div class="line-item">
                        <label for="r_paper">Tiền Giấy R</label>
                        <input id="r_paper" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="zn_quantity">SL bộ kẽm</label>
                        <input id="zn_quantity" disabled/>
                    </div>
                    <div class="line-item">
                        <label for="zn_total">Tiền kẽm</label>
                        <input id="zn_total" disabled/>
                    </div>
                </div>
                <div class="d-flex laminate line">
                    <div class="line-item">
                        <label for="print_quantity_in">Lượt in</label>
                        <input id="print_quantity_in" type="number" pattern="[0-9]*"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_print_1_in">TT Lượt in*</label>
                        <input id="tt_print_1_in" pattern="[0-9]*" type="number" value="30"/>
                    </div>
                    <div class="line-item">
                        <label for="tt_print_in">TT Lượt in</label>
                        <input id="tt_print_in" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="machining">Gia công</label>
                        <input id="machining" type="number"/>
                    </div>
                    <div class="line-item">
                        <label for="other">Chi phí phụ</label>
                        <input id="other" type="number"/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="r_total">TC Tiền R</label>
                        <input id="r_total" disabled/>
                    </div>
                    <div class="line-item">
                        <label for="tt_total">Tổng Cộng</label>
                        <input id="tt_total" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="interest">% Lãi suất</label>
                        <input id="interest" value="0.3"/>
                    </div>

                    <div class="line-item">
                        <label for="interest_amount">Lãi suất</label>
                        <input id="interest_amount" disabled/>
                    </div>
                </div>
                <div class="d-flex tt_3 line">
                    <div class="line-item">
                        <label for="prod_price">Giá SX</label>
                        <input id="prod_price" disabled/>
                    </div>
                    <div class="line-item">
                        <label for="prods_price">Giá bán</label>
                        <input id="prods_price" disabled/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('.close').click(function () {
            $(this).closest('.modal').modal('hide')
        })
        $('.line input').on('input', function () {
            // Lưu trữ giá trị input cần thiết
            let length = parseFloat($('#length').val()) || 0;
            let width = parseFloat($('#width').val()) || 0;
            let quantity = parseFloat($('#quantity').val()) || 0;
            let quantity_plus = parseFloat($('#sl_giay_bia_1').val()) || 0;
            let tt_giay_bia_1 = parseFloat($('#tt_giay_bia_1').val()) || 0;
            let tt_giay_bia_2 = parseFloat($('#tt_giay_bia_2').val()) || 0;

            let printQuantity = parseFloat($('#print_quantity').val()) || 0;
            let printTT = parseFloat($('#tt_print_1').val()) || 0;

            let znPrice = parseFloat($('#zn-price').val()) || 0;
            let znQuantity = parseFloat($('#zn-quantity').val()) || 0;

            let tt_can_bia_1 = parseFloat($('#tt_can_bia_1').val()) || 0;
            let tt_can_bia_2 = parseFloat($('#tt_can_bia_2').val()) || 0;
            let tt_can_bia_3 = parseFloat($('#tt_can_bia_3').val()) || 0;

            let page_quantity = parseFloat($('#page_quantity').val()) || 0;
            let tay_quantity_1 = parseFloat($('#tay_quantity_1').val()) || 0;
            let length_r = parseFloat($('#length_r').val()) || 0;
            let width_r = parseFloat($('#width_r').val()) || 0;
            let r_bh_1 = parseFloat($('#r_bh_1').val()) || 0;
            let r_paper_1 = parseFloat($('#r_paper_1').val()) || 0;
            let r_paper_2 = parseFloat($('#r_paper_2').val()) || 0;

            let print_quantity_in = parseFloat($('#print_quantity_in').val()) || 0;
            let tt_print_1_in = parseFloat($('#tt_print_1_in').val()) || 0;

            let machining = parseFloat($('#machining').val()) || 0;
            let other = parseFloat($('#other').val()) || 0;
            let interest = parseFloat($('#interest').val()) || 0;

            // Tính toán
            let sl_giay_bia = quantity + quantity_plus
            let tt_giay_bia = tt_giay_bia_1 * tt_giay_bia_2 * length * width * sl_giay_bia
            let zn_total_1 = znPrice * znQuantity
            let ttPrint = printQuantity * printTT;
            let tt_can_bia = tt_can_bia_1 * tt_can_bia_2 * tt_can_bia_3 * sl_giay_bia
            let bia_total = tt_giay_bia + zn_total_1 + ttPrint + tt_can_bia
            let tay_quantity = page_quantity / tay_quantity_1
            let r_bh = quantity + r_bh_1
            let r_quantity = tay_quantity * r_bh
            let r_paper = r_quantity * length_r * width_r * r_paper_1 * r_paper_2
            let zn_quantity = tay_quantity * 2
            let zn_total = zn_quantity * zn_total_1
            let tt_print_in = print_quantity_in * tt_print_1_in
            let r_total = r_paper + zn_total + tt_print_in + machining
            let ttMoney = bia_total + r_total
            if (other) {
                ttMoney += other;
            }
            let prodPrice = ttMoney / quantity;
            let interestAmount = prodPrice * interest;
            let prodsPrice = prodPrice + interestAmount;

            // Cập nhật giá trị vào các trường input
            $('#sl_giay_bia').val(sl_giay_bia);
            $('#tt_giay_bia').val(formatCurrency(tt_giay_bia));
            $('#zn_total_1').val(formatCurrency(zn_total_1));
            $('#tt_print').val(formatCurrency(ttPrint));
            $('#tt_can_bia').val(formatCurrency(tt_can_bia));
            $('#bia_total').val(formatCurrency(bia_total));
            $('#tay_quantity').val(formatCurrency(tay_quantity));
            $('#r_bh').val(formatCurrency(r_bh));
            $('#r_quantity').val(formatCurrency(r_quantity));
            $('#r_paper').val(formatCurrency(r_paper));
            $('#zn_quantity').val(formatCurrency(zn_quantity));
            $('#zn_total').val(formatCurrency(zn_total));
            $('#tt_print_in').val(formatCurrency(tt_print_in));
            $('#r_total').val(formatCurrency(r_total));
            $('#tt_total').val(formatCurrency(ttMoney));
            $('#prod_price').val(formatCurrency(prodPrice));
            $('#interest_amount').val(formatCurrency(interestAmount));
            $('#prods_price').val(formatCurrency(prodsPrice));
        });
    })
</script>

<style>
    .line {
        width: 100%;
        justify-content: space-between;
        padding-bottom: 10px;
    }
    .square .line-item, .paper .line-item, .zn .line-item, .laminate .line-item, .other .line-item {
        width: 30%;
    }
    .tt_1 .line-item, .tt_2 .line-item {
        width: 23%;
    }
    .tt_3 .line-item {
        width: 45%;
    }
    .line-item input {
        width: 100%;
    }
</style>

